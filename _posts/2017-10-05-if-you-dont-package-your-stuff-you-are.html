---
layout: post
title: If you don’t package your stuff you are doing it wrong!
date: '2017-10-05T16:01:00.001+01:00'
author: Matteo Emili
tags: 
modified_time: '2017-10-05T16:01:54.228+01:00'
thumbnail: https://lh3.googleusercontent.com/-1CMOVJ967Lo/WdZJR4LMlPI/AAAAAAAAEno/H9d6nWvWksMaEDD7NQVRx79lxxG5NArvQCHMYCw/s72-c/image_thumb%255B3%255D?imgmax=800
blogger_id: tag:blogger.com,1999:blog-9050180307874313601.post-4165459125179918957
blogger_orig_url: https://mattvsts.blogspot.com/2017/10/if-you-dont-package-your-stuff-you-are.html
---

<p>Packages are a thing, exactly like containers are.</p><p>I mean – who wants to spend countless time in moving files, editing configuration files and the likes? Nobody, I know, but still so many people don’t take advantage of application packaging when it comes to deploying stuff!</p><p>Let’s take an average web application as an example. What is the reason that pushes you to actually move stuff from a certain folder (DLLs, .configs, etc.) to the target server, instead of packaging your application’s components and move these instead?</p><p>All you need to do is adding <strong>/p:DeployOnBuild=true /p:WebPublishMethod=Package /p:PackageAsSingleFile=true </strong>to the MSBuild Arguments if you are using a traditional Build task. </p><p><a href="https://lh3.googleusercontent.com/-xbfD0PcyoUI/WdZJQJrZ8mI/AAAAAAAAEnk/uqJtAPgrj4Q5DFBLsLoSs8n8SlvazOvSgCHMYCw/s1600-h/image%255B7%255D"><img width="504" height="58" title="image" style="display: inline; background-image: none;" alt="image" src="https://lh3.googleusercontent.com/-1CMOVJ967Lo/WdZJR4LMlPI/AAAAAAAAEno/H9d6nWvWksMaEDD7NQVRx79lxxG5NArvQCHMYCw/image_thumb%255B3%255D?imgmax=800" border="0"></a></p><p>If you are using .NET Core you just need to select the Zip Published Projects in the Publish task!</p><p><a href="https://lh3.googleusercontent.com/-sk6zKnB9Yxs/WdZJS0wSVhI/AAAAAAAAEns/PkFmRL1LMyoQYoWnZMYKn9t7IWY1XQD2QCHMYCw/s1600-h/image%255B3%255D"><img width="504" height="137" title="image" style="display: inline; background-image: none;" alt="image" src="https://lh3.googleusercontent.com/-fjiQngAEHAk/WdZJT3cAUbI/AAAAAAAAEnw/k-YUIFwhTuoM9nle52x_Sk8TPFNshFzmwCHMYCw/image_thumb%255B1%255D?imgmax=800" border="0"></a></p><p>I just love the MSDeploy comeback. I am a huge supporter of this technology, because it makes life so much easier. It also has the side effect of enabling deployment to Azure in a snap, as it is one of the three supported delivery methods!</p><p>Let’s say you have a Build Definition and a Release Pipeline for this application. You want to deploy it to Azure – this is what you need to do:</p><p><a href="https://lh3.googleusercontent.com/-5A9SPxZMX3U/WdZJUw9BCSI/AAAAAAAAEn0/d3sod8H9_L0FaDhqj5sEIUqmvP0tMIHPgCHMYCw/s1600-h/image%255B11%255D"><img width="504" height="262" title="image" style="display: inline; background-image: none;" alt="image" src="https://lh3.googleusercontent.com/-tiogZRRNiKY/WdZJWALwl6I/AAAAAAAAEn4/7VPf5zq_7hki8pl8utzfD5ZfvaTlUSqDwCHMYCw/image_thumb%255B5%255D?imgmax=800" border="0"></a>What if you want to run the same application (providing it actually works on-premise as well and it does not specifically require any technology not available in your datacentre) on your own servers?</p><p>Firstly you’ll need to create a Deployment Group in VSTS – this can be done either by statically running the appropriate PowerShell script on your machines (interactively, via RDP) or dynamically with a bit of PowerShell or Azure if you are using IaaS. It is required because IaaS/on-premise machines in a Deployment Group will run an agent.</p><p>Then you can run whatever script you need to install the pre-requisites your application requires and configure all the settings, and eventually you can use the IIS Web App tasks to interact with IIS. Focusing on the IIS Web App Deploy task…</p><p><a href="https://lh3.googleusercontent.com/-IRFk6velfrA/WdZJXEgBAAI/AAAAAAAAEn8/VkHR1mKls-sZ9-SYG0p6-g8e42eP8ob8ACHMYCw/s1600-h/image%255B15%255D"><img width="504" height="421" title="image" style="display: inline; background-image: none;" alt="image" src="https://lh3.googleusercontent.com/-JvXoJeoEw54/WdZJYVBrinI/AAAAAAAAEoA/Rg30tRhBgZYzPEljIDPKp5VWh1vu8P90gCHMYCw/image_thumb%255B7%255D?imgmax=800" border="0"></a></p><p>That Package is exactly the same package I used in the Azure deployment above. So you can easily have a Continuous Delivery pipeline on Azure and a different one (with the same cadence or a different one, your call) for on-premise, both starting from the same artifacts.</p><p>Containers are better – of course – but they require a minimum or ramp up or learning in order to actually implement them in a production environment. Moving to MSDeploy on the other hand is a matter of minutes at most, and it will provide a tangible improvement.</p>