---
layout: post
title: Start building ASP.NET Core 1.1 with TFS
date: '2016-11-20T17:11:00.001Z'
author: Matteo Emili
tags: 
modified_time: '2016-11-20T17:11:37.122Z'
thumbnail: https://lh3.googleusercontent.com/-pCOoi_myBRE/WDHZKfFgX8I/AAAAAAAAEGI/dr6zIDPnDhQ/s72-c/0_thumb%25255B4%25255D.png?imgmax=800
blogger_id: tag:blogger.com,1999:blog-9050180307874313601.post-7825429359099973556
blogger_orig_url: https://mattvsts.blogspot.com/2016/11/start-building-aspnet-core-11-with-tfs.html
---

<p>In my spare time I am looking at ASP.NET Core – it brings so much change that you can’t really ignore it even if you are not a web developer.</p> <p>After putting together the first samples (thanks to the help of a book as well, review coming in a few weeks) I wanted to build something in my lab with a TFS build, so totally on-premise and with no connection to the shiny VSTS.</p> <p>After installing all the prerequisites (Visual Studio 2017 RC is a great starting point, and I added <a href="https://go.microsoft.com/fwlink/?LinkID=835014">this</a> on top as well) you can easily get up and running by using command-line tools in the build:</p> <p><a href="https://lh3.googleusercontent.com/-YIljU3JXbeE/WDHZIB9nr8I/AAAAAAAAEGA/nVu6JYeepXE/s1600-h/0%25255B6%25255D.png"><img title="0" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="0" src="https://lh3.googleusercontent.com/-pCOoi_myBRE/WDHZKfFgX8I/AAAAAAAAEGI/dr6zIDPnDhQ/0_thumb%25255B4%25255D.png?imgmax=800" width="244" height="122"></a></p> <p>But it isn’t really what I wanted… and in Team Foundation Server 2017 there are no OOB tools for .NET Core. Not everything is lost though.</p> <p>Firstly, install <a href="https://github.com/Microsoft/tfs-cli">tfx-cli</a>. Not only it works perfectly on-premise as well as with VSTS, but given that TFS now has a Personal Access Token system we can stop using basic authentication with it. Awesome.</p> <p><a href="https://lh3.googleusercontent.com/-MGvpjlvVR9Y/WDHZLbHgyOI/AAAAAAAAEGQ/WcJPBqSWt9s/s1600-h/image%25255B12%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="image" src="https://lh3.googleusercontent.com/-8Lrp6f_YR9k/WDHZMWwNljI/AAAAAAAAEGY/Otfo97bxk8M/image_thumb%25255B4%25255D.png?imgmax=800" width="504" height="271"></a></p> <p>Then, we need the nice task VSTS <a href="http://mattvsts.blogspot.co.uk/2016/11/net-core-support-in-new-team-build-with.html">uses</a>. You can get it from <a href="https://github.com/Microsoft/vsts-tasks/tree/master/Tasks/DotNetCoreCLI">here</a> and upload it to your local TFS by using <strong>tfx build tasks upload --task-path &lt;your path&gt;</strong>. Simple as that.</p> <p>So you can start using it! Instead of using a .json file as a Project file you can totally point it at a .csproj file – what the task does is nothing but wrapping calls to dotnet.exe so as long as it is updated you are totally fine.</p> <p><a href="https://lh3.googleusercontent.com/-sxxAyLhE2Vc/WDHZNRkdEII/AAAAAAAAEGg/VWV7SBWXex0/s1600-h/image%25255B5%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="image" src="https://lh3.googleusercontent.com/-hplGS-2BHLQ/WDHZORuGKVI/AAAAAAAAEGo/QdCywFUlQSo/image_thumb%25255B1%25255D.png?imgmax=800" width="244" height="190"></a></p> <p>As I am using a basically empty ASP.NET Core application I unchecked the <strong>Publish Web Project</strong> option in the <strong>dotnet publish</strong> step – I want total control over the command. <strong>Zip Published Projects</strong> is fine as it just zips the artifacts.</p> <p><a href="https://lh3.googleusercontent.com/-s1u7Kz2K88I/WDHZPb5FRlI/AAAAAAAAEGw/2iqGqk8hxKU/s1600-h/image%25255B8%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; margin: 0px; display: inline; padding-right: 0px" border="0" alt="image" src="https://lh3.googleusercontent.com/-MSF57Ev54j0/WDHZQpYMvJI/AAAAAAAAEG4/9NuXA1QuUvg/image_thumb%25255B2%25255D.png?imgmax=800" width="244" height="100"></a></p> <p>This is it – I now have a CI build running in…say five minutes? <img class="wlEmoticon wlEmoticon-smile" style="border-top-style: none; border-left-style: none; border-bottom-style: none; border-right-style: none" alt="Smile" src="https://lh3.googleusercontent.com/-FKtZI7qMO_4/WDHZR5VHlDI/AAAAAAAAEHA/b6hHjE05DTs/wlEmoticon-smile%25255B2%25255D.png?imgmax=800"></p>