---
layout: post
title: 'Team Project rename: is it that easy?'
date: '2015-07-27T11:25:00.001+01:00'
author: Matteo Emili
tags: 
modified_time: '2015-07-27T11:25:52.822+01:00'
thumbnail: http://lh3.googleusercontent.com/-QI4XgJr0YG8/VbYGlB-3zrI/AAAAAAAACHw/AXgeL5tVess/s72-c/image_thumb.png?imgmax=800
blogger_id: tag:blogger.com,1999:blog-9050180307874313601.post-4467815148943006845
blogger_orig_url: https://mattvsts.blogspot.com/2015/07/team-project-rename-is-it-that-easy.html
---

<p>Renaming a Team Project was the <a href="https://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2037605-rename-project-in-tfs">most asked</a> feature for Team Foundation Server since 2005, with over six thousands votes on it. Microsoft finally delivered that feature in April, in Visual Studio Online first and then in Team Foundation Server 2015.</p> <p><strong>Why did it take so long?</strong></p> <p>Team Foundation Server relies on a set of SQL Server databases, with a quite…<em>complex</em> schema. It wasn’t just about detecting a certain name and replacing it, it is all about GUIDs and the likes. A lot of work was done on the architecture, and more of it client-side.</p> <p><strong>Client-side? Yes.</strong></p> <p>When you rename a Team Project in either Visual Studio Online or Team Foundation Server, what happens among the operations is that also you are also creating a <em>redirect </em>from the old Team Project to the same, renamed one. </p> <p>Take a look:</p> <p><a href="http://lh3.googleusercontent.com/-LMbHglym4lg/VbYGkc6jkuI/AAAAAAAACHk/Qogl3ZJykW0/s1600-h/image%25255B2%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="http://lh3.googleusercontent.com/-QI4XgJr0YG8/VbYGlB-3zrI/AAAAAAAACHw/AXgeL5tVess/image_thumb.png?imgmax=800" width="232" height="73"></a> </p> <p>this <strong>Foo</strong> Team Project has some work in it:</p> <p><a href="http://lh3.googleusercontent.com/-GayGO38gCJs/VbYGl3V-aRI/AAAAAAAACH8/0dyHL5W0_co/s1600-h/image%25255B7%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="http://lh3.googleusercontent.com/-Oq3Z2x_6ezQ/VbYGmiVUp9I/AAAAAAAACII/a2t9KJznTag/image_thumb%25255B3%25255D.png?imgmax=800" width="407" height="101"></a> </p> <p>a query with an explicit value in it (<strong>Foo instead of the @Project macro</strong>):</p> <p><a href="http://lh3.googleusercontent.com/--IL6CDsIRIE/VbYGnJr31iI/AAAAAAAACIU/gQtrWpmXqVs/s1600-h/image%25255B11%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="http://lh3.googleusercontent.com/-1o1qQGOeTss/VbYGnxo-kiI/AAAAAAAACIg/nOW3GPOpDZs/image_thumb%25255B5%25255D.png?imgmax=800" width="584" height="151"></a> </p> <p>and of course some code.</p> <p>You can then <strong>rename</strong> it:</p> <p><a href="http://lh3.googleusercontent.com/-YeGryOmir1s/VbYGpWj3AkI/AAAAAAAACIs/_8_WDcXYII4/s1600-h/image%25255B15%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="http://lh3.googleusercontent.com/-VLYwKGTJkfs/VbYGqIwJwYI/AAAAAAAACI4/3ufroD-XVeo/image_thumb%25255B7%25255D.png?imgmax=800" width="584" height="475"></a> </p> <p>and what you’ll need to do is to care about code mappings (workspaces or remotes, this would be best handled by a client update – <strong>2015, 2013.5 or 2012.5</strong>). Code is migrated, Builds are migrated, and all the Work Item Tracking migration is completely effortless.</p> <p>So you say yes, and the Team Project is renamed. Teams with ‘Foo’ in their name are migrated too:</p> <p><a href="http://lh3.googleusercontent.com/-eBVMzZW02GM/VbYGq85oXPI/AAAAAAAACJE/qXzpSmCuZX4/s1600-h/image%25255B18%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="http://lh3.googleusercontent.com/-oZJttZWY1Ns/VbYGrqomR0I/AAAAAAAACJQ/mfx8YvKk6T0/image_thumb%25255B8%25255D.png?imgmax=800" width="149" height="107"></a> </p> <p><strong>Areas</strong> and <strong>iterations</strong> are migrated too, as expected:</p> <p><a href="http://lh3.googleusercontent.com/-jKz-Or1Ukfo/VbYGsYnJIuI/AAAAAAAACJc/-q1F-vc6RVk/s1600-h/image%25255B29%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="http://lh3.googleusercontent.com/-NZzM02Sfl0k/VbYHG3wPKdI/AAAAAAAACJo/oEzm8E5GehE/image_thumb%25255B13%25255D.png?imgmax=800" width="244" height="99"></a> </p> <p>Even the <strong>explicit query</strong> is migrated!</p> <p><a href="http://lh3.googleusercontent.com/-jTH2_S4o_0Y/VbYHHhyv6SI/AAAAAAAACJ0/uDgmHN-kSxM/s1600-h/image%25255B33%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="http://lh3.googleusercontent.com/-c4MviXZqoP0/VbYHIlDgGHI/AAAAAAAACKA/185C4yVH5IA/image_thumb%25255B15%25255D.png?imgmax=800" width="584" height="147"></a> </p> <p>So what happens if you go straight to <strong>Foo</strong>? </p> <p><a href="http://lh3.googleusercontent.com/-SOGUGCE1Vx4/VbYHJQ6UudI/AAAAAAAACKM/r6C2rpE-ugs/s1600-h/image%25255B22%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="http://lh3.googleusercontent.com/-NVfFuYikLXI/VbYHKAsYyyI/AAAAAAAACKY/49FISadFeJ8/image_thumb%25255B10%25255D.png?imgmax=800" width="408" height="56"></a> </p> <p>This:</p> <p><a href="http://lh3.googleusercontent.com/-3lFiQnU-LV4/VbYHK1lOp9I/AAAAAAAACKk/RrDCBzAzi-c/s1600-h/image%25255B26%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="http://lh3.googleusercontent.com/-j1n1RP3B9N8/VbYHL70a6DI/AAAAAAAACKw/QsdP10H93no/image_thumb%25255B12%25255D.png?imgmax=800" width="355" height="154"></a>&nbsp;</p> <p>This doesn’t mean you are going to lose the possibility of using the former name – if you will reuse it, you would just lose the URL redirect but all the renamed artefacts would be kept as-is..</p> <p>There are a couple of things you need to manually address after this. As mentioned above, you need to sort out the Workspaces or the Git Remotes, depending on the Version Control System you are using. </p> <p>If you are using a <strong>BDT Build Definition with Lab Management</strong>, you need to <strong>refresh</strong> the Build Definition by running the wizard again so it can be properly linked again with the right Team Project. This is actually a workaround which will be solved by the new <strong>TFS 2015 Legacy Build Controller</strong>, but if you need to use older Controllers that’s how to sort it out.</p> <p></p> <p></p> <p></p> <p></p> <p></p> <p></p> <p></p> <p></p> <p>On-premises, run a <strong>ProcessWarehouse job</strong> and a <strong>ProcessAnalysisDatabase job</strong> as soon as possible, so you will avoid any stale data in SSRS and the Excel Services in SharePoint would be already updated with the current names. The jobs would run anyway in the time interval you set, but this will avoid any temporary inconsistency in the reporting data. </p> <p>Eventually, <strong>clear the SharePoint cache</strong> and run a <strong>SharePoint timer job</strong> so the Excel Services are up and running on the right values.</p>  