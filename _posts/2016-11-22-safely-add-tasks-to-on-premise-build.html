---
layout: post
title: Safely add tasks to an on-premise Build Agent from the vsts-tasks repository
date: '2016-11-22T12:56:00.001Z'
author: Matteo Emili
tags: 
modified_time: '2016-11-22T12:56:21.926Z'
thumbnail: https://lh3.googleusercontent.com/-66J6JQdgwjs/WDRAbTJK9GI/AAAAAAAAEIk/6vLFsr2oM0g/s72-c/image_thumb.png?imgmax=800
blogger_id: tag:blogger.com,1999:blog-9050180307874313601.post-2407328464406250912
blogger_orig_url: https://mattvsts.blogspot.com/2016/11/safely-add-tasks-to-on-premise-build.html
---

<p>In my <a href="http://mattvsts.blogspot.co.uk/2016/11/start-building-aspnet-core-11-with-tfs.html">last post</a> I uploaded a task from the <a href="https://github.com/Microsoft/vsts-tasks">vsts-tasks</a> GitHub repository to my on-premise Build Agent. How did I know it was going to work in the same way as with VSTS?</p> <p>First of all you need to check the minimum agent version in the task you are interested in. Let’s take the .NET Core task I used as an example, that task has a minimum version of 1.95:</p> <p><a href="https://lh3.googleusercontent.com/-wQf4j6xU4MY/WDRAaW7q0uI/AAAAAAAAEIc/H7x4imYI6Po/s1600-h/image%25255B2%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; margin: 0px; display: inline; padding-right: 0px" border="0" alt="image" src="https://lh3.googleusercontent.com/-66J6JQdgwjs/WDRAbTJK9GI/AAAAAAAAEIk/6vLFsr2oM0g/image_thumb.png?imgmax=800" width="244" height="227"></a></p> <p>This means that the task is going to work from version 95 of the closed-source version on Windows. How do I know that?</p> <p>Before TFS 2017 there were two different agents – a Windows-only, closed-source version and a Xplat, <a href="https://github.com/Microsoft/vso-agent">open-source</a> one. The closed-source version was v1.x, the open-source version was v0.x. This version number can be retrieved in the Agent.Version property of your Build Agent:</p> <p><a href="https://lh3.googleusercontent.com/-Eer5O4xmecg/WDRAcD-uL7I/AAAAAAAAEIs/3IxxVKEe9bY/s1600-h/image%25255B5%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; margin: 0px; display: inline; padding-right: 0px" border="0" alt="image" src="https://lh3.googleusercontent.com/-Y98xwUxEdFc/WDRAdH03fOI/AAAAAAAAEI0/CE43bdMOVc0/image_thumb%25255B1%25255D.png?imgmax=800" width="244" height="28"></a></p> <p>Now the agents come from a single <a href="https://github.com/Microsoft/vsts-agent">repository</a> and they are written in .NET Core as a single code base. This version of the agents is marked with <a href="https://github.com/Microsoft/vsts-agent/releases/tag/v2.105.7">v2.x</a>.</p>  <p>So whenever you want to add a task from the tasks repository always check for the minimum agent version required for it. Generally, if you are on the latest version you won’t have problems adding new tasks unless there are breaking changes – and these are really well documented, if any.</p>