---
layout: post
title: How to configure Visual Studio Team Lab Management 2013, once and for all
date: '2014-11-17T21:44:00.001Z'
author: Matteo Emili
tags: 
modified_time: '2014-11-17T21:44:07.143Z'
thumbnail: http://lh3.ggpht.com/-sZFaXwEja8U/VGpsBq9mk1I/AAAAAAAABnc/js24riJA1oM/s72-c/image_thumb%25255B1%25255D.png?imgmax=800
blogger_id: tag:blogger.com,1999:blog-9050180307874313601.post-3686259105716302874
blogger_orig_url: https://mattvsts.blogspot.com/2014/11/how-to-configure-visual-studio-team-lab.html
---

<p>Every time I go at a conference/user group and Lab Management is mentioned I hear someone saying “Lab Management? I never understood how it sticks together…” “Wow, it must be an adventure to set it up!” and so on…</p> <p>Well, after all Visual Studio Team Lab Management (yes, fancy name) is not rocket science <strong>at all!</strong> It is just a clever mix of many different components, each doing a different thing, to enable the “Virtual Test Fabric” scenario. Nothing more, nothing less.</p> <p>To begin with, you would need System Center Virtual Machine Manager (2012 R2), at least one Hyper-V host, Team Foundation Server (2013.4 in this case), a Build Controller and a Test Controller.</p> <p>Assuming SCVMM installed&nbsp; and configured (how: install SQL Server Database Engine, install SCVMM pointing at it, add an Hyper-V host), you need to install the SCVMM Console on the Team Foundation Server Application Tier. Now you can configure Lab Management!</p> <p><a href="http://lh3.ggpht.com/-WHyduQEx7yU/VGpsA6BpS8I/AAAAAAAABnY/qK4JNqSyB44/s1600-h/image%25255B3%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="http://lh3.ggpht.com/-sZFaXwEja8U/VGpsBq9mk1I/AAAAAAAABnc/js24riJA1oM/image_thumb%25255B1%25255D.png?imgmax=800" width="644" height="199"></a> </p> <p>You just need to enter your <strong>SCVMM FQDN</strong>:</p> <p><a href="http://lh6.ggpht.com/-ppvjDq2MdiM/VGpsCPbD3mI/AAAAAAAABnk/wbLLlpUt2hg/s1600-h/image%25255B16%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="http://lh4.ggpht.com/-O_bCVl1_09I/VGpsCmrvjZI/AAAAAAAABns/9Bi5GZDNGo0/image_thumb%25255B8%25255D.png?imgmax=800" width="644" height="249"></a> </p> <p>and – if you wish to use it – an <strong>IP Block</strong> and a <strong>DNS Suffix</strong> for your Network Isolated machines:</p> <p><a href="http://lh4.ggpht.com/-pZR5Uq17udI/VGpsDNGpuwI/AAAAAAAABn0/AQYXJaQMRuc/s1600-h/image%25255B15%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="http://lh6.ggpht.com/-nivY708eesI/VGpsDllNRGI/AAAAAAAABn8/JHo4PeMtnuQ/image_thumb%25255B7%25255D.png?imgmax=800" width="490" height="484"></a> </p> <p></p> <p></p> <p>This is the core, infrastructure configuration. You are going to see that something is missing though…</p> <p><a href="http://lh4.ggpht.com/-w_dXDjZOyvc/VGpsEGMFHhI/AAAAAAAABoE/syY-vBqRbs4/s1600-h/image%25255B13%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="http://lh4.ggpht.com/--1J-5Dsav4I/VGpsFABBxwI/AAAAAAAABoQ/7lcFH9j26jY/image_thumb%25255B5%25255D.png?imgmax=800" width="644" height="160"></a> </p> <p>You just configured the infrastructure for the whole Lab Management deployment, what’s missing is the configuration for each Team Project Collection you want to enable.</p> <p>The two settings you need are:</p> <ul> <li>A <strong>Library Share</strong> (a normal SMB share) containing the SCVMM templates used by VSTLM to create your VMs<a href="http://lh6.ggpht.com/-CQeMod4FG5o/VGpsFdnGdlI/AAAAAAAABoU/H2SGWX8KoI4/s1600-h/image%25255B32%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="http://lh6.ggpht.com/-YzXHRs8QIMM/VGpsFwdg4NI/AAAAAAAABoc/snHdeT3g67s/image_thumb%25255B18%25255D.png?imgmax=800" width="484" height="361"></a> </li> <li>A <strong>Host Group</strong> (it’s actually optional, as SCVMM creates a default “<strong>All Hosts</strong>” Host Group, which in your case is enough as we are assuming you are starting with one Hyper-V host server)<br><a href="http://lh4.ggpht.com/-RB2l9RCEE-Q/VGpsGKxp56I/AAAAAAAABok/qmeMYCoogpE/s1600-h/image%25255B31%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="http://lh3.ggpht.com/-LYR982mFnZI/VGpsGg5GqvI/AAAAAAAABos/s7Iw2WUdq9U/image_thumb%25255B17%25255D.png?imgmax=800" width="484" height="350"></a>&nbsp;</li></ul> <p>As <a href="http://mattvsts.blogspot.co.uk/2014/11/visual-studio-lab-management-and-auto.html">mentioned</a>, the Auto Provision flag enables all the Team Projects contained into your Collection.</p> <p>Now the only missing piece is a Test Controller to bind to Lab Management. In fact, if you launch Test Manager and try to create a new Environment, it would complain:</p> <p><a href="http://lh6.ggpht.com/-WwbsuZIic2E/VGpsHDfvQuI/AAAAAAAABo0/Rf6tfx-VAUs/s1600-h/image%25255B33%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="http://lh4.ggpht.com/-yYRUaAI0MwA/VGpsHjrz2WI/AAAAAAAABo8/5pEu9fhdd8M/image_thumb%25255B19%25255D.png?imgmax=800" width="424" height="193"></a> </p> <p>So, let’s install the <a href="http://www.microsoft.com/en-us/download/confirmation.aspx?id=44923">Test Controller</a> and configure it:</p> <p><a href="http://lh6.ggpht.com/-4kR_NpTYCdA/VGpsIAjjAzI/AAAAAAAABpE/JJfc3WpzXq4/s1600-h/image%25255B46%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="http://lh5.ggpht.com/-9QCMP53Ci8c/VGpsIU7FpSI/AAAAAAAABpM/Qs6fhZ_08WQ/image_thumb%25255B26%25255D.png?imgmax=800" width="404" height="455"></a> </p> <p>If you need it, configure a Lab Service Account as well. This is helpful in cases where you need to <a href="http://mattvsts.blogspot.co.uk/2012/05/standard-environment-in-visual-studio.html">resort</a> to Shadow Accounts (or you can’t add the Service Account to the Local Administrators group), but let’s keep it simple and skip it for now. Just keep that in mind:</p> <p><a href="http://lh6.ggpht.com/-rwiyy594KvE/VGpsIzmsodI/AAAAAAAABpU/gbOG60PxCqI/s1600-h/image%25255B42%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="http://lh6.ggpht.com/-hvVd4ICONFU/VGpsJUOaHAI/AAAAAAAABpc/2pmXDW_nlgo/image_thumb%25255B24%25255D.png?imgmax=800" width="404" height="107"></a> </p> <p></p> <p>That’s all! This is the whole Lab Management configuration! Is it still rocket science? In another post we are going to look at the environments’ configurations and at some useful tips from the real world.</p>  