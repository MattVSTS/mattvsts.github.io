---
layout: post
title: Moving a SonarQube installation to SQL Azure Database
date: '2016-06-10T11:50:00.001+01:00'
author: Matteo Emili
tags: 
modified_time: '2016-06-10T11:50:05.156+01:00'
thumbnail: https://lh3.googleusercontent.com/-y4iqqCueYhk/V1qbQrKSPrI/AAAAAAAADSY/-G2BpCp32WM/s72-c/wlEmoticon-smile%25255B2%25255D.png?imgmax=800
blogger_id: tag:blogger.com,1999:blog-9050180307874313601.post-7452662106673614074
blogger_orig_url: https://mattvsts.blogspot.com/2016/06/moving-sonarqube-installation-to-sql.html
---

<p>There might be a tons of reasons behind it – you might want to take advantage of SonarQube’s support for SQL Azure Database, and it is totally fair enough.</p> <p>There was a showstopper in the past if you were on 5.5 – <a href="https://jira.sonarsource.com/browse/SONAR-7589">this bug</a>, fixed with the 5.6 release.</p> <p>So let’s move! But upgrade to 5.6 first, on-premise <img class="wlEmoticon wlEmoticon-smile" style="border-top-style: none; border-bottom-style: none; border-right-style: none; border-left-style: none" alt="Smile" src="https://lh3.googleusercontent.com/-y4iqqCueYhk/V1qbQrKSPrI/AAAAAAAADSY/-G2BpCp32WM/wlEmoticon-smile%25255B2%25255D.png?imgmax=800"> so you are going to have a clear starting point.</p> <p>The first thing you need to do is to create a new SQL Azure Database in your subscription. Call it like the one you have on-premise, and use the same collation (tip: remember <strong>CS_AS</strong>…) for peace of mind.</p> <p>Then (unless you are using SQL Server 2016) run the <a href="https://sqlazuremw.codeplex.com/">SQL Azure Migration Wizard</a>. This tool will do everything on your behalf, and it is going to migrate the database in the cloud.</p> <p>If you get any connection error here, remember that SQL Azure is locked down for external access – you need to add the IP address for client connectivity to the Azure Firewall:</p> <p><a href="https://lh3.googleusercontent.com/-3Qt9IGHzTXM/V1qbRnVqMdI/AAAAAAAADSk/oPv8kgzsxBg/s1600-h/image%25255B4%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="image" src="https://lh3.googleusercontent.com/-pPVC2B3x6uw/V1qbScrMF8I/AAAAAAAADSw/2G7DZaBNHWA/image_thumb%25255B2%25255D.png?imgmax=800" width="524" height="114"></a></p> <p><a href="https://lh3.googleusercontent.com/-NNYTuGBg7kQ/V1qbTIKzC3I/AAAAAAAADS8/0dyIvPBLJk8/s1600-h/image%25255B7%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="image" src="https://lh3.googleusercontent.com/-xdj3IigpuNE/V1qbT3DJX_I/AAAAAAAADTI/MDyXA3GywFo/image_thumb%25255B3%25255D.png?imgmax=800" width="160" height="244"></a></p> <p><a href="https://lh3.googleusercontent.com/-nRFwx1aMcAU/V1qbUxMmzbI/AAAAAAAADTU/fJCt8ZZtKGA/s1600-h/image%25255B10%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="image" src="https://lh3.googleusercontent.com/-kvfmyTe8SkQ/V1qbVjzMPbI/AAAAAAAADTg/7SLMuAWEBPE/image_thumb%25255B4%25255D.png?imgmax=800" width="244" height="142"></a></p> <p>As you would be using SQL Server Authentication, you also need to create a SQL User for SonarQube. Even if you already used that, the users are not migrated by the tool so it is something to do anyway.</p> <p>Eventually, change the SonarQube database connection string to your new &lt;azure DB&gt;.database.windows.net in the sonar.properties file:</p> <p><a href="https://lh3.googleusercontent.com/-M0R3-9IilRk/V1qbWU5gs5I/AAAAAAAADTs/39roEO_z6vY/s1600-h/image%25255B14%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="image" src="https://lh3.googleusercontent.com/-5biUNBKD5Rg/V1qbXJpClYI/AAAAAAAADT4/RmLRJvBDpzM/image_thumb%25255B6%25255D.png?imgmax=800" width="524" height="60"></a></p> <p>Done! It is really easy, and if you are moving from a SQL Server Enterprise Edition it is also cheaper.</p>