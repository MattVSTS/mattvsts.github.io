---
layout: post
title: SQL Server AlwaysOn with Team Foundation Server – a great team!
date: '2014-02-04T16:43:00.001Z'
author: Matteo Emili
tags: 
modified_time: '2014-02-04T16:43:37.159Z'
thumbnail: http://lh4.ggpht.com/-t1OeKtTo6W0/UvEYtzD3y0I/AAAAAAAABRg/ZHuIPvUPcng/s72-c/image_thumb.png?imgmax=800
blogger_id: tag:blogger.com,1999:blog-9050180307874313601.post-1949608471165823629
blogger_orig_url: https://mattvsts.blogspot.com/2014/02/sql-server-alwayson-with-team.html
---

<p>High Availability and Disaster Recovery are the first two items on the list for a TFS Administrator, as Team Foundation Server hosts a critical service for almost every company with a linked development team.</p> <p>Frankly in the past delegating the HA story to someone else in the organization was a very common practice, as it is not something related to TFS – which is pretty agonostic about the SQL Server deployment topology or about the number of Application Tiers.</p> <p>If you want to use SQL Server AlwaysOn in your deployment – apart from all the other technologies which can be involved (Windows Failover Clustering, SQL Server Clustering, VMs redundancy, etc.) – the only configuration needed is to create a <strong>SQL Server AlwaysOn Availability Group</strong>. You are going to get a replication between up to four different SQL Server instances so you can failover at anytime.</p> <p>Given a Windows Failover Cluster and two different SQL Server instances, one on each node, you just need to do as it follows:</p> <p><a href="http://lh4.ggpht.com/-xFUHrPWyTsI/UvEYtOg-7GI/AAAAAAAABRc/f3XdW7KQI3M/s1600-h/image%25255B2%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="http://lh4.ggpht.com/-t1OeKtTo6W0/UvEYtzD3y0I/AAAAAAAABRg/ZHuIPvUPcng/image_thumb.png?imgmax=800" width="244" height="105"></a> </p> <p>You launch the wizard, and you specify a name and, for now, no databases are going to be contained inside the Availability Group. </p> <p>Then you can select the replica mode (synchronous or asynchronous) and you must specify a Listener, which is going to become the <em>instance name</em> you are going to use to configure Team Foundation Server.</p> <p>Then – while configuring Team Foundation Server using the <strong>Advanced</strong> mode - you are going to need to specify the Listener and tick the box saying that it is a <strong>SQL AlwaysOn Availability Group</strong>. TFS will then configure some specific settings for it in the process.</p> <p><img title="Select AlwaysOn checkbox" alt="Select AlwaysOn checkbox" src="http://i.msdn.microsoft.com/dynimg/IC630622.png"></p> <p>It is extremely important to add all the databases, and each database must be backed up, otherwise you won’t be able to add them to the AG. </p> <p>Eventually, do not forget it is not the only HA solution, and a good HA solution is composed by several technologies working together on a minded plan :)</p> <p>Here you can find the <a href="http://msdn.microsoft.com/en-us/library/jj662725.aspx">MSDN</a> page for the topic.</p>  