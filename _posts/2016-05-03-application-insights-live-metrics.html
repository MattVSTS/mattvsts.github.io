---
layout: post
title: Application Insights Live Metrics Stream with ASP.NET 5
date: '2016-05-03T11:27:00.001+01:00'
author: Matteo Emili
tags: 
modified_time: '2016-05-03T11:27:23.656+01:00'
thumbnail: https://lh3.googleusercontent.com/-e8KEdRTy_7o/Vyh8_u88bKI/AAAAAAAADG0/54b_tYZzG7o/s72-c/image_thumb.png?imgmax=800
blogger_id: tag:blogger.com,1999:blog-9050180307874313601.post-2975393396654680980
blogger_orig_url: https://mattvsts.blogspot.com/2016/05/application-insights-live-metrics.html
---

<p>The single feature I deeply loved from the old Visual Studio Online Application Insights (before it was handed over to the Azure Team) was the <strong>Developer Dashboard</strong>, a real-time overview of how your application was faring.</p> <p><img alt="Improve your product by analysing real world usage data with Visual Studio Online Application Insights" src="https://www.microsoft.com/en-gb/developers/images/articles/content/487-04.png?v=1.0" width="484" height="366"></p> <p>There is a replacement though: <strong>Live Metrics Stream</strong>. It is very powerful, way more than the old Developer Dashboard:</p> <p><a href="https://lh3.googleusercontent.com/-stDkYk0M-lM/Vyh8-r3a1xI/AAAAAAAADGs/Zn0Br8FHF-8/s1600-h/image%25255B2%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="image" src="https://lh3.googleusercontent.com/-e8KEdRTy_7o/Vyh8_u88bKI/AAAAAAAADG0/54b_tYZzG7o/image_thumb.png?imgmax=800" width="244" height="154"></a></p> <p>The problem is that if you try to configure it with an out-of-the-box ASP.NET 5 Application you will never manage to make it work:</p> <p><a href="https://lh3.googleusercontent.com/-OW-lQ0V1Dmk/Vyh9AexwCsI/AAAAAAAADG8/8Nx-yPP_jc8/s1600-h/clip_image002%25255B5%25255D.jpg"><img title="clip_image002" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="clip_image002" src="https://lh3.googleusercontent.com/-Z3po2cQXid0/Vyh9BOGJnHI/AAAAAAAADHE/uZLc7_kdaTU/clip_image002_thumb%25255B2%25255D.jpg?imgmax=800" width="513" height="95"></a></p> <p>…even if you have the latest Application Insights SDK package installed.</p> <p>The reason is because not all the features of Application Insights are supported out-of-the-box with ASP.NET 5 – if you run it against .NET Core 5.0.</p> <p>If you want to integrate LMS in an ASP.NET 5 application, you need to add <a href="https://github.com/Microsoft/ApplicationInsights-aspnetcore/wiki/Telemetry-Processors:-Sampling-and-Metrics-Stream#metrics-stream">this</a> code snippet to your startup.cs file and <strong>remove dnxcore50</strong> from your project.json file.</p> <p><a href="https://lh3.googleusercontent.com/-dYBHjiMJe0U/Vyh9B1Lx1OI/AAAAAAAADHM/6RC_KQDoiEo/s1600-h/image%25255B5%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="image" src="https://lh3.googleusercontent.com/-xCPy3JjV4lI/Vyh9CoToNlI/AAAAAAAADHU/jFH7zOzawtU/image_thumb%25255B1%25255D.png?imgmax=800" width="236" height="150"></a></p> <p>I totally expect a full support for all the Application Insights’ features to come soon, but for now if you really need LMS in your application you need to stick with <strong>DNX 4.5.1+</strong> as a runtime.</p>