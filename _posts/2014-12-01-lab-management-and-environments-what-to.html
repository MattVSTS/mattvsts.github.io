---
layout: post
title: Lab Management and Environments – what to remember
date: '2014-12-01T16:45:00.001Z'
author: Matteo Emili
tags: 
modified_time: '2014-12-01T16:45:48.436Z'
thumbnail: http://lh3.ggpht.com/-XxWIiovq_Wg/VHybJypHHLI/AAAAAAAABp4/YYzAzVGiFTs/s72-c/image_thumb%25255B2%25255D.png?imgmax=800
blogger_id: tag:blogger.com,1999:blog-9050180307874313601.post-6540231129654421823
blogger_orig_url: https://mattvsts.blogspot.com/2014/12/lab-management-and-environments-what-to.html
---

<p>Lab Management’s SCVMM environments are nothing more than a bunch of Virtual Machines running somewhere in a datacentre. Really. I do not understand the reluctancy (almost fear!) when I mention it.</p> <p>Let’s start with <strong>Network Isolation</strong>. Network Isolation is an extremely handy feature, allowing a side-by-side deployment of multiple instances of an environment with the same properties (machine name, IP addresses, basically everything which should not be duplicated in a network). It is very cool.</p> <p>And guess what, there is a clear, <strong>step-by-step </strong><a href="http://msdn.microsoft.com/en-us/library/dd380770.aspx"><strong>guide</strong></a> on how to create a Domain Controller VM to be used as a template for a Network Isolated Environment. Basically once you installed the ADDS you need to clean the DNS.</p> <p>Once you have the VMs ready, I would suggest to compose some environments to be reused without searching for the VM every time. To then enable the Network Isolation, you need to check this checkbox in the Advanced tab of the Wizard:</p> <p><a href="http://lh6.ggpht.com/-9uvL-XGd4n4/VHybG0kOvWI/AAAAAAAABpw/awbwz-CrOSQ/s1600-h/image%25255B6%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="http://lh3.ggpht.com/-XxWIiovq_Wg/VHybJypHHLI/AAAAAAAABp4/YYzAzVGiFTs/image_thumb%25255B2%25255D.png?imgmax=800" width="644" height="151"></a> </p> <p>That is all you need to do. SCVMM will then add a <strong>secondary Network Card</strong> to the VM to enable this feature, but it is nothing you should worry about.</p> <p>Also remember that unless you set auto-provisioning, <strong>your VMs won’t be automatically shared</strong> among the Team Projects in a Collection. You can import them from the library you used to store the template anyway.</p> <p><a href="http://lh5.ggpht.com/-pqSuPHbw-1w/VHybKKHIjlI/AAAAAAAABp8/v7Kzr2v1Yrg/s1600-h/image%25255B10%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="http://lh5.ggpht.com/-lh4wm1FQomw/VHybKgHaVCI/AAAAAAAABqE/X0VF7I4aHPY/image_thumb%25255B4%25255D.png?imgmax=800" width="644" height="466"></a> </p> <p>One last thing to remember on the VM Templates – always remember to <strong>enable the</strong> <strong>File and Printers Sharing</strong> firewall exception, otherwise the deployment would fail, and you won’t be able to connect to the VMs via the MTM Environment Viewer for instance.</p> <p>If you want an all-in-one reference, have a look at this appendix from <a href="http://msdn.microsoft.com/en-us/library/jj159343.aspx#"></a><a href="http://msdn.microsoft.com/en-us/library/jj159345.aspx">Testing for Continuous Delivery with Visual Studio 2012</a> – even if it is on the older version everything is still relevant. The whole book is actually on the matter, so I suggest to have a look at it.&nbsp; </p> <p>Another misunderstood topic seems to be <strong>Test Settings.</strong> We all have seen the fantastic demos with screen and audio recording, but then <em>all of a sudden</em> you cannot set it up in your lab.</p> <p>To enable that feature, you need to install the <strong>Desktop Experience</strong> Feature on your Windows Server VMs:</p> <p><a href="http://lh4.ggpht.com/-sNVMK-Q7go4/VHybLCKr36I/AAAAAAAABqM/KuP6S3Aud3Q/s1600-h/image%25255B13%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="http://lh4.ggpht.com/-r6NVah0JJCU/VHybLmvdz_I/AAAAAAAABqU/Lg9_9yRB17k/image_thumb%25255B5%25255D.png?imgmax=800" width="244" height="71"></a> </p> <p>and then select the <strong>Screen and Voice Recorder</strong> diagnostic data adapter from the Test Setting you want to use:</p> <p><a href="http://lh4.ggpht.com/-0vsxxnax1s8/VHybMUAu2wI/AAAAAAAABqc/YS8QhbcTSOs/s1600-h/image%25255B23%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="http://lh5.ggpht.com/-YsWhGlMSD64/VHybMgICUkI/AAAAAAAABqk/yEz5cMYOc4k/image_thumb%25255B13%25255D.png?imgmax=800" width="644" height="334"></a> </p> <p>Each DDA can be configured to better suit the usage you want, in this case just bear in mind that you are storing <strong>big binary files</strong> inside the Team Project Collection database, so its size might increase very quickly if you use it a lot. Moreover, there is a number of useful settings you might use:</p> <p><a href="http://lh4.ggpht.com/-cVABQ-xak8o/VHybNJaLhdI/AAAAAAAABqs/MWevFpM2688/s1600-h/image%25255B26%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="http://lh3.ggpht.com/-vGuH0X-kfIM/VHybNhHw6VI/AAAAAAAABq0/5LN7HC1TLA0/image_thumb%25255B14%25255D.png?imgmax=800" width="162" height="166"></a> </p> <p>You can <strong>copy specific files</strong> (not tied to the Version Control or the build output) to the VMs, run pre and post-test execution <strong>scripts</strong>, or even <strong>force 32 or 64-bit execution</strong> in case you need it:</p> <p><a href="http://lh4.ggpht.com/-ZgXlkCMi5uI/VHybOLa_0sI/AAAAAAAABq8/Tg751dVIqO8/s1600-h/image%25255B32%25255D.png"><img title="image" style="border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; display: inline" border="0" alt="image" src="http://lh5.ggpht.com/-EhFyD9kZ5Ko/VHybOrcWO7I/AAAAAAAABrE/VSYYQQxF-F4/image_thumb%25255B16%25255D.png?imgmax=800" width="244" height="141"></a>&nbsp; </p> <p>Unfortunately the number of resources here is not immense – <a href="http://msdn.microsoft.com/en-gb/library/dd936084.aspx">MSDN</a> is extremely useful as usual, together with the aforementioned eBook, the <a href="http://vsarlabman.codeplex.com/">Visual Studio ALM Rangers Lab Management Guide</a> and the <a href="http://mattvsts.blogspot.co.uk/2014/07/review-professional-team-foundation.html">Pro Team Foundation Server 2013</a> book. </p> <p>But again, this is not rocket science so you should be good with them.</p>  