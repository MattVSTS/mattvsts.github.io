---
layout: post
title: Keys for a painless TFS upgrade experience
date: '2013-12-15T21:00:00.001Z'
author: Matteo Emili
tags: 
modified_time: '2013-12-15T21:00:29.093Z'
thumbnail: http://lh4.ggpht.com/-ZIGiU0Lv_gg/Uq4YXPAFtiI/AAAAAAAABOs/gb7GLlr8uws/s72-c/wlEmoticon-smile%25255B2%25255D.png?imgmax=800
blogger_id: tag:blogger.com,1999:blog-9050180307874313601.post-8528271534136901121
blogger_orig_url: https://mattvsts.blogspot.com/2013/12/keys-for-painless-tfs-upgrade-experience.html
---

<p>This weekend I had to work on the upgrade of the main Team Foundation Server we have in production. Everything went fine – despite not everything according to the planned slick idea we had. The whole thing has been longer than just yesterday, though, and it comes with several takeaways. </p> <p>Here’s what, of course involving our shiny Team Foundation Server 2013. Keep in mind the scenario: thousand of users all around the world, terabytes of databases. Here we go:</p> <ol> <li><strong>Plan, but do not overplan.<br></strong>We had a plan but you cannot cover anything. You cannot plan every single step and do not have a B, C, D plan. I am not talking about not having a plan, but I suggest of being confident and flexible. <br>Start planning with enough time, so the right guys are involved, and keep in mind the basics of TFS and its known issues, the history of the server (in our case it was essential) and use the TFS Upgrade Guide to have a guideline to follow.</li> <li><strong>Test the core, test the basic.<br></strong>This TFS survived through upgrades from 2005 on, we discovered what we thought impossible. Your team’s skills will let you fix the problems you might find. <br>So test the core, verifying that all the essential pillars are working. If you find out issues, try to fix them or plan a deferral (maybe with the CSS?) if they are not critical. <br>Do not start trying the latest, better tech combo. As a sample, do not start upgrading the test server to 2013 and upgrade the build servers as well. Test the existing servers (or clones of them) against the 2013 server, and only when you are sure of the result test the upgrade of them.<br>File as much documentation as you can but – again – you cannot cover the 100% of cases.</li> <li><strong>Problems are problems if they come out just in production. Otherwise they are issues to fix.<br></strong>You might find something to fix at a later time, which does not impact all the users but maybe a small percentage. You can work it out later. <br>Instead, for instance, we hit a very nasty problem during our live production update. We had no plan for it, as it did not happen in the test. What did we do? We tried several solution (one worked, luckily <img class="wlEmoticon wlEmoticon-smile" style="border-top-style: none; border-bottom-style: none; border-right-style: none; border-left-style: none" alt="Smile" src="http://lh4.ggpht.com/-ZIGiU0Lv_gg/Uq4YXPAFtiI/AAAAAAAABOs/gb7GLlr8uws/wlEmoticon-smile%25255B2%25255D.png?imgmax=800">) while someone else worked on a mitigation plan to use in case no solution was fine.<br>We did not have to use it, but if you are running a service, you have to make tradeoffs and stop the whole service for just a part of it is unacceptable. </li></ol> <p>Remember that Team Foundation Server is modular, so you can exclude a part of it in case of problems, and that usually the upgrade compatibility for who comes from the last version (2012 in our case) is almost effortless.</p>  